{"ast":null,"code":"var _jsxFileName = \"/Users/alex/Documents/Github/Portfolio/src/Components/FeedbackModal/FeedbackModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport Badge from '../Badge/Badge';\nimport { supabase } from '../../utils/supabaseClient';\nimport styles from './FeedbackModal.module.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst FeedbackModal = ({\n  isOpen,\n  onClose,\n  onSubmit,\n  sessionDurationSeconds\n}) => {\n  _s();\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [feedbackText, setFeedbackText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [submitError, setSubmitError] = useState(null);\n  const options = [\"Нет релевантного опыта\", \"Нехватило описания кейсов\", \"Слабая преза\", \"Все супер\"];\n  const toggleOption = option => {\n    if (selectedOptions.includes(option)) {\n      setSelectedOptions(selectedOptions.filter(item => item !== option));\n    } else {\n      setSelectedOptions([...selectedOptions, option]);\n    }\n  };\n  const handleSubmit = async () => {\n    // Проверяем, что хотя бы одно из полей заполнено\n    if (!selectedOptions.length && !feedbackText.trim()) {\n      setSubmitError('Пожалуйста, выберите хотя бы один вариант или введите текст отзыва');\n      return;\n    }\n    setIsLoading(true);\n    setSubmitError(null);\n    try {\n      // Отправляем данные в Supabase\n      const {\n        error\n      } = await supabase.from('exit_feedback').insert([{\n        options: selectedOptions,\n        feedback_text: feedbackText,\n        page_url: window.location.href,\n        user_agent: navigator.userAgent,\n        session_duration_seconds: sessionDurationSeconds || 0\n      }]);\n      if (error) {\n        console.error('Error saving feedback:', error);\n        setSubmitError('Ошибка при отправке обратной связи. Пожалуйста, попробуйте еще раз.');\n      } else {\n        // Успешно отправлено\n        onSubmit({\n          options: selectedOptions,\n          feedback: feedbackText\n        });\n        onClose();\n      }\n    } catch (error) {\n      console.error('Error saving feedback:', error);\n      setSubmitError('Ошибка при отправке обратной связи. Пожалуйста, попробуйте еще раз.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  if (!isOpen) return null;\n  const modalRoot = document.getElementById('modal-root');\n  if (!modalRoot) {\n    console.error('Modal root element not found');\n    return null;\n  }\n  return /*#__PURE__*/createPortal(/*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.feedbackModalOverlay,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.feedbackModal,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.feedbackModalHeader,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041D\\u0435 \\u0437\\u0430\\u0446\\u0435\\u043F\\u0438\\u043B? \\u041F\\u043E\\u043C\\u043E\\u0433\\u0438 \\u043C\\u043D\\u0435 \\u0441\\u0442\\u0430\\u0442\\u044C \\u043B\\u0443\\u0447\\u0448\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.feedbackModalClose,\n          onClick: onClose,\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.feedbackModalContent,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.feedbackOptions,\n          children: options.map((option, index) => /*#__PURE__*/_jsxDEV(Badge, {\n            variant: selectedOptions.includes(option) ? 'primary' : 'default',\n            size: \"large\",\n            onClick: () => toggleOption(option),\n            className: `${styles.feedbackBadge} ${selectedOptions.includes(option) ? styles.selected : ''}`,\n            children: option\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.feedbackTextarea,\n          children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: feedbackText,\n            onChange: e => setFeedbackText(e.target.value),\n            placeholder: \"\\u041F\\u0430\\u0440\\u0430 \\u0441\\u043B\\u043E\\u0432, \\u0447\\u0442\\u043E \\u043C\\u043E\\u0436\\u043D\\u043E \\u0443\\u043B\\u0443\\u0447\\u0448\\u0438\\u0442\\u044C\",\n            className: styles.feedbackInput\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), submitError && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.feedbackError,\n          children: submitError\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.feedbackSubmitButton,\n          onClick: handleSubmit,\n          disabled: !selectedOptions.length && !feedbackText.trim() || isLoading,\n          children: isLoading ? 'Отправка...' : 'Отправить'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this), modalRoot);\n};\n_s(FeedbackModal, \"tRhaGaWrqKr+mLsxdT+sWNjEXUU=\");\n_c = FeedbackModal;\nexport default FeedbackModal;\nvar _c;\n$RefreshReg$(_c, \"FeedbackModal\");","map":{"version":3,"names":["React","useState","createPortal","Badge","supabase","styles","jsxDEV","_jsxDEV","FeedbackModal","isOpen","onClose","onSubmit","sessionDurationSeconds","_s","selectedOptions","setSelectedOptions","feedbackText","setFeedbackText","isLoading","setIsLoading","submitError","setSubmitError","options","toggleOption","option","includes","filter","item","handleSubmit","length","trim","error","from","insert","feedback_text","page_url","window","location","href","user_agent","navigator","userAgent","session_duration_seconds","console","feedback","modalRoot","document","getElementById","className","feedbackModalOverlay","children","feedbackModal","feedbackModalHeader","fileName","_jsxFileName","lineNumber","columnNumber","feedbackModalClose","onClick","feedbackModalContent","feedbackOptions","map","index","variant","size","feedbackBadge","selected","feedbackTextarea","value","onChange","e","target","placeholder","feedbackInput","feedbackError","feedbackSubmitButton","disabled","_c","$RefreshReg$"],"sources":["/Users/alex/Documents/Github/Portfolio/src/Components/FeedbackModal/FeedbackModal.jsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { createPortal } from 'react-dom';\nimport Badge from '../Badge/Badge';\nimport { supabase } from '../../utils/supabaseClient';\nimport styles from './FeedbackModal.module.scss';\n\nconst FeedbackModal = ({ isOpen, onClose, onSubmit, sessionDurationSeconds }) => {\n  const [selectedOptions, setSelectedOptions] = useState([]);\n  const [feedbackText, setFeedbackText] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const [submitError, setSubmitError] = useState(null);\n\n  const options = [\n    \"Нет релевантного опыта\",\n    \"Нехватило описания кейсов\",\n    \"Слабая преза\",\n    \"Все супер\"\n  ];\n\n  const toggleOption = (option) => {\n    if (selectedOptions.includes(option)) {\n      setSelectedOptions(selectedOptions.filter(item => item !== option));\n    } else {\n      setSelectedOptions([...selectedOptions, option]);\n    }\n  };\n\n  const handleSubmit = async () => {\n    // Проверяем, что хотя бы одно из полей заполнено\n    if (!selectedOptions.length && !feedbackText.trim()) {\n      setSubmitError('Пожалуйста, выберите хотя бы один вариант или введите текст отзыва');\n      return;\n    }\n    \n    setIsLoading(true);\n    setSubmitError(null);\n    \n    try {\n      // Отправляем данные в Supabase\n      const { error } = await supabase\n        .from('exit_feedback')\n        .insert([{\n          options: selectedOptions,\n          feedback_text: feedbackText,\n          page_url: window.location.href,\n          user_agent: navigator.userAgent,\n          session_duration_seconds: sessionDurationSeconds || 0\n        }]);\n\n      if (error) {\n        console.error('Error saving feedback:', error);\n        setSubmitError('Ошибка при отправке обратной связи. Пожалуйста, попробуйте еще раз.');\n      } else {\n        // Успешно отправлено\n        onSubmit({\n          options: selectedOptions,\n          feedback: feedbackText\n        });\n        onClose();\n      }\n    } catch (error) {\n      console.error('Error saving feedback:', error);\n      setSubmitError('Ошибка при отправке обратной связи. Пожалуйста, попробуйте еще раз.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  if (!isOpen) return null;\n\n  const modalRoot = document.getElementById('modal-root');\n  \n  if (!modalRoot) {\n    console.error('Modal root element not found');\n    return null;\n }\n\n  return createPortal(\n    <div className={styles.feedbackModalOverlay}>\n      <div className={styles.feedbackModal}>\n        <div className={styles.feedbackModalHeader}>\n          <h2>Не зацепил? Помоги мне стать лучше</h2>\n          <button className={styles.feedbackModalClose} onClick={onClose}>×</button>\n        </div>\n        \n        <div className={styles.feedbackModalContent}>\n          <div className={styles.feedbackOptions}>\n            {options.map((option, index) => (\n              <Badge\n                key={index}\n                variant={selectedOptions.includes(option) ? 'primary' : 'default'}\n                size=\"large\"\n                onClick={() => toggleOption(option)}\n                className={`${styles.feedbackBadge} ${selectedOptions.includes(option) ? styles.selected : ''}`}\n              >\n                {option}\n              </Badge>\n            ))}\n          </div>\n          \n          <div className={styles.feedbackTextarea}>\n            <textarea\n              value={feedbackText}\n              onChange={(e) => setFeedbackText(e.target.value)}\n              placeholder=\"Пара слов, что можно улучшить\"\n              className={styles.feedbackInput}\n            />\n          </div>\n          \n          {submitError && (\n            <div className={styles.feedbackError}>\n              {submitError}\n            </div>\n          )}\n          <button\n            className={styles.feedbackSubmitButton}\n            onClick={handleSubmit}\n            disabled={(!selectedOptions.length && !feedbackText.trim()) || isLoading}\n          >\n\n            {isLoading ? 'Отправка...' : 'Отправить'}\n          </button>\n        </div>\n      </div>\n    </div>,\n    modalRoot\n );\n};\n\nexport default FeedbackModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}